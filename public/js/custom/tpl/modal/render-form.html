<div class="modal-header">
	<h3 class="modal-title">{[ simulation.name ]} <small class="text-secondary" ng-if="simulation.id">| edit simulation</small><small class="text-secondary" ng-if="!simulation.id">| new simulation</small></h3>
</div>
<div class="modal-body">
	<div class="form-row">
		<div class="form-group col-md-4">
			<!--<label for="inputName">Status</label>-->
			<select class="form-control" 
				class="form-control" 
				ng-model="values.state"
		  		ng-class="{'is-invalid': errors.state}"
			>
				<option ng-repeat="option in stateOptions" 
					ng-selected="option.id == values.state" 
					value="{[option.id]}">{[ option.name ]}</option>
			</select>
			<div ng-if="errors.state"
				ng-repeat="(key, text) in errors.state"
				class="invalid-feedback">{[key]}. {[text]}</div>
		</div>
		<div class="form-group col-md-4">
			<!--<label for="inputTitle">Who</label>-->
		    <input type="text" 
		  		id="inputEmploye"
		   		class="form-control" 
				placeholder="Who"
				ng-disabled="values.state <= 0"
		  		ng-class="{'is-invalid': errors.who}"
		  		ng-model="values.who"/>
			<div ng-if="errors.who"
				ng-repeat="(key, text) in errors.who"
				class="invalid-feedback">{[key]}. {[text]}</div>
		</div>
		<div class="form-group col-md-4">
			<!--<label for="inputTitle">When</label>-->
			<div class="input-group">
				<input type="text" class="form-control" 
					uib-datepicker-popup="dd/MM/yyyy" 
					placeholder="When"
					ng-model="values.when" 
					ng-disabled="values.state <= 0"
					is-open="popup.opened" 
					datepicker-options="dateOptions" 
					ng-required="true" 
					close-text="Close" 
					alt-input-formats="altInputFormats" 
		  			ng-class="{'is-invalid': errors.when}"
				/>
				<span class="input-group-btn">
					<button type="button" class="btn btn-default" 
						ng-click="popup.opened = true">
						<i class="fa fa-calendar"></i>
					</button>
				</span>
				<div ng-if="errors.when"
					ng-repeat="(key, text) in errors.when"
					class="invalid-feedback">{[key]}. {[text]}</div>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="form-row" ng-repeat="(i, note) in values.suggestions">
			<div class="form-group col-sm-11">
				<text-angular 
					ng-model="note.text"
					ta-toolbar="[
						['bold', 'italics', 'underline' ],
				   		['ul', 'insertLink', 'html'],
					]"
					ta-text-editor-class="form-height form-control"
					ng-class="{'is-invalid': errors.suggestions[i].text}"
					placeholder="Suggestion.."
					class=""
				>
				</text-angular>
				<div ng-if="errors.suggestions[i].text"
					ng-repeat="(key, text) in errors.suggestions[i].text"
					class="text-danger">{[key]}. {[text]}</div>
			</div>
			<div class="form-group col-sm-1 text-center">
				<a href="" class="btn btn-sm btn-outline-primary" 
					ng-click="values.suggestions.splice(i, 1);">
					<span class="fa fa-close"></span>
				</a>
			</div>
		</div>
		<div>
			<a href="" class="btn btn-sm btn-outline-primary" 
			ng-click="values.suggestions.push({})">
			<span class="fa fa-plus"></span> Suggestion</a>
		</div>
	</div>
	<div class="form-group">
		<div class="form-row" ng-repeat="(i, note) in values.effects">
			<div class="form-group col-sm-11">
				<text-angular 
					ng-model="note.text"
					ta-toolbar="[
						['bold', 'italics', 'underline' ],
				   		['ul', 'insertLink', 'html'],
					]"
					ta-text-editor-class="form-height form-control"
					ng-class="{'is-invalid': errors.effects[i].text}"
					placeholder="Suggestion.."
					class=""
				>
				</text-angular>
				<div ng-if="errors.effects[i].text"
					ng-repeat="(key, text) in errors.effects[i].text"
					class="text-danger">{[key]}. {[text]}</div>
			</div>
			<div class="form-group col-sm-1 text-center">
				<a href="" class="btn btn-sm btn-outline-primary" 
					ng-click="values.effects.splice(i, 1);">
					<span class="fa fa-close"></span>
				</a>
			</div>
		</div>
		<div>
			<a href="" class="btn btn-sm btn-outline-primary" 
			ng-click="values.effects.push({})">
			<span class="fa fa-plus"></span> Effect</a>
		</div>
	</div>
	<div class="form-group">
		<div class="form-row" ng-repeat="(i, note) in values.preventions">
			<div class="form-group col-sm-11">
				<text-angular 
					ng-model="note.text"
					ta-toolbar="[
						['bold', 'italics', 'underline' ],
				   		['ul', 'insertLink', 'html'],
					]"
					ta-text-editor-class="form-height form-control"
					ng-class="{'is-invalid': errors.preventions[i].text}"
					placeholder="Suggestion.."
					class=""
				>
				</text-angular>
				<div ng-if="errors.preventions[i].text"
					ng-repeat="(key, text) in errors.preventions[i].text"
					class="text-danger">{[key]}. {[text]}</div>
			</div>
			<div class="form-group col-sm-1 text-center">
				<a href="" class="btn btn-sm btn-outline-primary" 
					ng-click="values.preventions.splice(i, 1);">
					<span class="fa fa-close"></span>
				</a>
			</div>
		</div>
		<div>
			<a href="" class="btn btn-sm btn-outline-primary" 
			ng-click="values.preventions.push({})">
			<span class="fa fa-plus"></span> Prevention</a>
		</div>
	</div>
</div>
<div class="modal-footer">
	<a href="" class="btn btn-default" ng-click="cancel()">Cancel</a>
	<a href="" class="btn btn-success" ng-click="save()">Save</a>
</div>
